var googleMapsV3=(function(){var g,a;function b(){}b.createMap=function(m,j,l,k,o,n,h){if(o==undefined){if(h){h("No valid div element provided")}}if(google&&google.maps){g=google.maps;a=g.event;new b.map2D(o,m,j,l,k,n,h)}else{if(h){h("Could not load google maps library.")}}};b.setListener=function(h,j,k){if(k==null){google.maps.event.clearListeners(h,j)}else{google.maps.event.addListener(h,j,k)}};b.interpolateJSNI=function(n,m,l,k,h,j){return b.interpolate(new google.maps.LatLng(n,m),new google.maps.LatLng(l,k),h,j)};b.interpolate=function(n,k,h,l){if(l==false){var m=(n.lat()+k.lat())/h;var j=n.lng()-k.lng();if(j<=180&&j>=-180){j=(n.lng()+k.lng())/h}else{j=(n.lng()+k.lng()+360)/h}return new google.maps.LatLng(m,j)}else{return google.maps.geometry.spherical.interpolate(n,k,h)}};b.halfWayTo=function(k,h,j){return b.interpolate(k,h,0.5,j)};b.roundDistance=function(h){if(h>1000){return Math.round(h/1000)+"km"}else{if(h<=1000){return Math.round(h)+"m"}}return h};b.convertBounds=function(h){return{swLat:h.getSouthWest().lat(),swLng:h.getSouthWest().lng(),neLat:h.getNorthEast().lat(),neLng:h.getNorthEast().lng()}};b._getMarkersBounds=function(k){var j=new google.maps.LatLngBounds();var h;for(h=0;h<k.length;h++){j.extend(k[h].getPosition())}return j};b._getMarkersCenter=function(j){var h=b._getMarkersBounds(j);return h.getCenter()};b._getPathBounds=function(k){var j=new google.maps.LatLngBounds();var h;k.forEach(function(m,l){j.extend(m)});return j};b._getPathCenter=function(h){return b._getPathBounds(h).getCenter()};b.generatePath=function(h){var j=new google.maps.MVCArray;for(i=0;i<h.length;){j.insertAt(j.getLength(),new google.maps.LatLng(h[i],h[i+1]));i=i+2}return j};b.convertPath=function(h){var j=[];h.forEach(function(l,k){j.push(l.lat());j.push(l.lng())});return j};b.getPathLength=function(h){return google.maps.geometry.spherical.computeLength(b.generatePath(h))};b.getPathArea=function(h){return google.maps.geometry.spherical.computeArea(b.generatePath(h))};b.defaultDragMarker={url:"./img/dragIcon.png",shiftX:5,shiftY:5};b.defaultEditMarker={url:"./img/dragIconLight.png",shiftX:5,shiftY:5};function f(j){function h(k){g.Rectangle.call(this,{bounds:new g.LatLngBounds(new g.LatLng(-89.9,-179.99999),new g.LatLng(89.9,179.99999)),map:k,strokeOpacity:0,fillOpacity:0,zIndex:10000})}h.prototype=new g.Rectangle();return new h(j)}b.map2D=(function(){function h(n,q,r,u,s,t,p){var o=new g.LatLng(q,r);this.mapTypeIds=[g.MapTypeId.ROADMAP,g.MapTypeId.HYBRID,g.MapTypeId.SATELLITE,g.MapTypeId.TERRAIN];var v={zoom:u,minZoom:1,center:o,streetViewControl:false,panControl:false,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},mapTypeControlOptions:{mapTypeIds:this.mapTypeIds,style:g.MapTypeControlStyle.DROPDOWN_MENU},mapTypeControl:false,scaleControl:true,scaleControlOptions:{position:g.ControlPosition.BOTTOM_LEFT},rotateControl:true,mapTypeId:s?s:g.MapTypeId.HYBRID};var m=new g.Map(n,v);m.setTilt(0);this.infoWindow=new g.InfoWindow({content:"Not Initialised!",maxWidth:400});j(m);k(m);this.geocoder=new g.Geocoder();this.overlaysArray=[];this.theTooltip=l(m);this.zIndex=0;this.map=m;t(this)}function l(n){function m(o){this.div_=null;this.setMap(o)}m.prototype=new g.OverlayView();m.prototype.onAdd=function(){var r=document.createElement("DIV");r.className="twipsy below";r.style.width="120px";r.style.fontSize="9px";this.div_=r;var p=document.createElement("DIV");p.className="twipsy-arrow";r.appendChild(p);var q=document.createElement("DIV");q.className="twipsy-inner";r.appendChild(q);this.title_=q;var o=this.getPanes();o.overlayImage.appendChild(r);this.hide()};m.prototype.draw=function(){};m.prototype.show=function(s,q){if(this.div_==null){return}var p=this.getProjection();var o=p.fromLatLngToDivPixel(s);this.title_.innerHTML=q;var r=this.div_;r.style.left=o.x-60+"px";r.style.top=o.y+20+"px";r.style.display="block"};m.prototype.hide=function(){this.div_.style.display="none"};m.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);this.div_=null};return new m(n)}function k(m){}function j(o){function m(p){this.setMap(p)}m.prototype=new g.OverlayView;m.prototype.onAdd=function(){};m.prototype.onRemove=function(){};m.prototype.draw=function(){};if(!o.dummyCanvas){function n(q){var r=0;var p=0;if(q.offsetParent){do{r+=q.offsetLeft;p+=q.offsetTop}while(q=q.offsetParent)}return{x:r,y:p}}o.dummyCanvas=new m(o);o.getMapCanvasProjection=function(){return this.dummyCanvas.getProjection()};o.convertScreenPositionToLatLng=function(t,s){var p=o.getDiv();var r=n(p);var q=o.getMapCanvasProjection().fromContainerPixelToLatLng(new g.Point(t-r.x,s-r.y));return q};o.convertLatLngToScreenPosition=function(s,r){var q=o.getDiv();var t=n(q);var p=o.getMapCanvasProjection().fromLatLngToContainerPixel(new g.LatLng(s,r));p.x+=t.x;p.y+=t.y;return p}}}h.prototype.addZoomOnShift=function(o){var m=this;var n=this.map;n.getDiv().parentElement.addEventListener("mousedown",function(q){if(q.shiftKey){q.preventDefault();q.stopPropagation();var t=f(n);a.clearInstanceListeners(t);var w=n.convertScreenPositionToLatLng(q.clientX,q.clientY);var v=new g.Polygon({map:n,strokeColor:"#ff0000",strokeWeight:1,strokeOpacity:1,fillColor:"#ffffff",fillOpacity:0});var x=new g.MVCArray;v.setPaths(new g.MVCArray([x]));function p(z,y){b.uniRectangle.refreshPath(x,z,y)}function u(A){var z=A.latLng;var y=w;p(z,y);m.theTooltip.show(A.latLng,"<p>Position: "+A.latLng.toUrlValue(4)+"</p><p>Release to zoom to extent</p>")}function r(A){var z=x.getAt(1);var y=x.getAt(3);o(z.lat(),z.lng(),y.lat(),y.lng());s()}function s(){v.setMap(null);a.clearInstanceListeners(t);t.setMap(null);delete t;m.theTooltip.hide();m.editCleanUp=null}m.editCleanUp=s;p(w,w);a.addListener(t,"mousemove",u);a.addListener(t,"mouseup",r)}},true)};h.prototype.displayCopyright=function(m,p){if(!m||m==null||m.length==0){return}if(!this.copyrightHolder){var q=document.createElement("div");q.className="eiCopyrightHolder";this.map.controls[g.ControlPosition.BOTTOM_RIGHT].push(q);this.copyrightHolder=q}if(p){var n=!this.copyrightHolder.innerHTML||this.copyrightHolder.innerHTML.length==0;if(n||this.copyrightHolder.innerHTML.indexOf(m)==-1){this.copyrightHolder.innerHTML+=(n?"":", ")+m}}else{var o=this.copyrightHolder.innerHTML.indexOf(m)==0;this.copyrightHolder.innerHTML=this.copyrightHolder.innerHTML.replace((o?"":", ")+m,"")}};h.prototype.convertScreenPositionToLatLng=function(o,n){var m=this.map.convertScreenPositionToLatLng(o,n);return{lat:m.lat(),lng:m.lng()}};h.prototype.convertLatLngToScreenPosition=function(n,m){return this.map.convertLatLngToScreenPosition(n,m)};h.prototype.disableAllEditMode=function(){var m;for(m=0;m<this.overlaysArray.length;m++){if(typeof this.overlaysArray[m].setEditMode=="function"&&this.overlaysArray[m].isEditable()===true){this.overlaysArray[m].setEditMode(false)}}};h.prototype.triggerResize=function(){a.trigger(this.map,"resize")};h.prototype.showOverview=function(m){this.map.setOptions({overviewMapControl:m})};h.prototype.setCenter=function(n,m){this.map.setCenter(new g.LatLng(n,m))};h.prototype.getCenter=function(){var m=this.map.getCenter();return[m.lat(),m.lng()]};h.prototype.setZoomLevel=function(m){this.map.setZoom(m)};h.prototype.getZoomLevel=function(){return this.map.getZoom()};h.prototype.addControl=function(m){this.map.controls[g.ControlPosition.TOP_RIGHT].push(m)};h.prototype.setBounds=function(o,m,p,n){this.map.fitBounds(new g.LatLngBounds(new g.LatLng(o,m),new g.LatLng(p,n)))};h.prototype.getMapId=function(){return this.map.getMapTypeId()};h.prototype.setClickListener=function(m){if(m!=null){b.setListener(this.map,"click",function(n){m(n.latLng.lat(),n.latLng.lng())})}else{b.setListener(this.map,"click",null)}};h.prototype.setMapId=function(n){if(n&&n!=""&&n!=null&&this.map.mapTypes.get(n)){var m=this.map.getMapTypeId();if(m){var o=this.map.mapTypes.get(m);if(o&&o.displayCopyright){o.displayCopyright(false)}}this.map.setMapTypeId(n);var p=this.map.mapTypes.get(n);if(p.displayCopyright){p.displayCopyright(true)}}else{this.map.setMapTypeId(google.maps.MapTypeId.SATELLITE)}};h.prototype.cleanUp=function(){if(this.overlaysArray){var m;for(m=0;m<this.overlaysArray.length;m++){this.removeOverlay(this.overlaysArray[m])}}this.overlaysArray=[];this.closeInfoWindow();if(this.editCleanUp){this.editCleanUp()}};h.prototype.addMapType=function(r,p,s,o,q,t,m){var n;n=(new b.uniTMSLayer(this,s,o,q,-90,-180,90,180,true))._layer;n.minZoom=t;n.maxZoom=m;n.name=r;n.alt=r;this.mapTypeIds.push(p);this.map.mapTypes.set(p,n)};h.prototype.addWMSMapType=function(r,y,n,t,q,s,A,p,u,v,x,z,m,w){var o;o=(new b.uniWMSLayer(this,n,t,q,s,A,p,u,v,x,z,true))._layer;o.minZoom=m==undefined?0:m;o.maxZoom=w==undefined?15:w;o.name=r;o.alt=r;this.mapTypeIds.push(y);this.map.mapTypes.set(y,o)};h.prototype.getMapTypeIds=function(){return this.mapTypeIds};h.prototype.openInfoWindow=function(o,m,n){this.infoWindow.setContent(n);this.infoWindow.open(this.map);this.infoWindow.setPosition(new g.LatLng(o,m))};h.prototype.openInfoWindowWidget=function(o,m,n){this.infoWindow.setContent(n);this.infoWindow.open(this.map);this.infoWindow.setPosition(new g.LatLng(o,m))};h.prototype.closeInfoWindow=function(){this.infoWindow.close()};h.prototype.removeOverlay=function(m){if(m.remove){m.remove()}if(m.setMap){m.setMap(null)}};h.prototype.getBounds=function(){var m=this.map.getBounds();return b.convertBounds(m)};h.prototype.displayCoordinates=function(m){if(this.latLngOverlay==undefined){var n=function(p){var q=document.createElement("DIV");q.innerHTML="Position: ";q.className="ei-latLngOverlay";p.controls[g.ControlPosition.BOTTOM_LEFT].push(q);var o=p.getDiv();a.addDomListener(o,"mousemove",function(s){var r=p.convertScreenPositionToLatLng(s.clientX,s.clientY);q.innerHTML="Position: lng "+r.lng().toFixed(4)+" deg, lat "+r.lat().toFixed(4)+" deg"});this.div_=q};n.prototype.show=function(){this.div_.style.display="block"};n.prototype.hide=function(){this.div_.style.display="none"};this.latLngOverlay=new n(this.map)}if(m){this.latLngOverlay.show()}else{this.latLngOverlay.hide()}};h.prototype.displayCoordinatesGrid=function(m){if(!this.graticule){this.graticule=new c(this.map);this.graticule.draw()}if(m){this.graticule.show()}else{this.graticule.hide()}};return h})();b.createMarker=function(k,j,h){return new g.Marker({map:k,position:j,icon:new g.MarkerImage(h.url,undefined,new g.Point(0,0),new g.Point(h.shiftX,h.shiftY)),flat:true})};b.uniMarker=function(h,n,j,k,m,l){this.map2D=h;this.marker=b.createMarker(h.map,new g.LatLng(n,j),{url:k,shiftX:m,shiftY:l});h.overlaysArray.push(this)};b.uniMarker.prototype.setTitle=function(h){this.marker.setTitle(h)};b.uniMarker.prototype.setListener=function(j,k){var h=this;b.setListener(this.marker,j,function(){k(h)})};b.uniMarker.prototype.setDraggable=function(j){this.marker.setDraggable(true);var h=this;b.setListener(this.marker,"dragend",function(){j(h)})};b.uniMarker.prototype.setClickHandler=function(j){var h=this;b.setListener(this.marker,"click",function(k){j(k.latLng.lat(),k.latLng.lng())})};b.uniMarker.prototype.setDblClickHandler=function(j){var h=this;b.setListener(this.marker,"dblclick",function(){j(h)})};b.uniMarker.prototype.setOnDragHandler=function(j){this.marker.setDraggable(true);var h=this;b.setListener(this.marker,"drag",function(){j(h)})};b.uniMarker.prototype.setVisible=function(h){return this.marker.setVisible(h)};b.uniMarker.prototype.getPosition=function(){return this.marker.getPosition()};b.uniMarker.prototype.getLat=function(){return this.marker.getPosition().lat()};b.uniMarker.prototype.getLng=function(){return this.marker.getPosition().lng()};b.uniMarker.prototype.setTitle=function(h){return this.marker.setTitle(h)};b.uniMarker.prototype.setPosition=function(j,h){return this.marker.setPosition(new g.LatLng(j,h))};b.uniMarker.prototype.remove=function(){this.marker.setMap(null)};b.uniMarker.prototype.halfWayTo=function(h,j){return b.halfWayTo(this.getPosition(),h.getPosition(),j)};b.createPoint=function(j,n){if(j.editCleanUp){j.editCleanUp()}var m=j.map;var k=f(m);m.setOptions({draggableCursor:"crosshair"});a.addListener(k,"click",h);a.addListener(k,"mousemove",function(o){j.theTooltip.show(o.latLng,"<p>Click to create point at ("+o.latLng.toUrlValue(4)+")</p>")});function h(o){l();n(o.latLng.lat(),o.latLng.lng())}function l(){a.clearInstanceListeners(k);k.setMap(null);delete k;m.setOptions({draggableCursor:"auto"});j.theTooltip.hide();j.editCleanUp=null}j.editCleanUp=l};b.uniSurface=function(h){this.map2D=h;this.surface=[]};b.uniSurface.prototype.setClickHandler=function(h){b.setListener(this.surface,"click",function(j){h(j.latLng.lat(),j.latLng.lng())})};b.uniSurface.prototype.setMouseOverHandler=function(j){var h=this;b.setListener(this.surface,"mouseover",function(l){var k=h.map2D.getProjection().fromLatLngToContainerPixel(l.latLng);j(k.x,k.y)})};b.uniSurface.prototype.setMouseOutHandler=function(j){var h=this;b.setListener(this.surface,"mouseout",function(){j(h)})};b.uniSurface.prototype.setTooltip=function(j){var h=this;b.setListener(this.surface,"mousemove",function(k){h.map2D.theTooltip.show(k.latLng,j)});b.setListener(this.surface,"mouseout",function(){h.map2D.theTooltip.hide();h.surface.setOptions({strokeWeight:h.weight})});b.setListener(this.surface,"mouseover",function(){h.surface.setOptions({strokeWeight:h.weight*2})})};b.uniSurface.prototype.setVisible=function(h){this.surface.setVisible(h);this.setEditMode(false)};b.uniSurface.prototype.setFillColor=function(h){this.surface.setOptions({fillColor:h})};b.uniSurface.prototype.setFillOpacity=function(h){this.fillopacity=h;this.surface.setOptions({fillOpacity:h})};b.uniSurface.prototype.setStrokeStyle=function(h,j,k){this.color=h;this.opacity=j;this.weight=k;this.surface.setOptions({strokeColor:h,strokeWeight:k,strokeOpacity:j})};b.uniSurface.prototype.setHighlighted=function(h){if(h&&!this.isHighlighted){this.surface.setOptions({strokeColor:"#ffffff",strokeWeight:this.weight*2});this.isHighlighted=true;this.setOnTop()}else{if(!h&&this.isHighlighted){this.surface.setOptions({strokeColor:this.color,strokeWeight:this.weight});this.isHighlighted=false}}};b.uniSurface.prototype.setOnTop=function(){this.surface.setOptions({zIndex:this.map2D.zIndex++})};b.uniSurface.prototype.sendToBack=function(){this.surface.setOptions({zIndex:0})};b.uniSurface.prototype.configureEditable=function(j){var h=this;this.edit=undefined;this.editable=true;this.setEditMode(false);b.setListener(this.surface,"mouseover",function(){if(h.edit!=true&&h.editable==true){h.setHighlighted(true)}else{h.setHighlighted(false)}});b.setListener(this.surface,"mousemove",function(k){if(h.edit!=true&&h.editable==true){h.map2D.theTooltip.show(k.latLng,"<p>"+j+"</p>")}});b.setListener(this.surface,"mouseout",function(){h.setHighlighted(false);h.map2D.theTooltip.hide()});b.setListener(this.surface,"click",function(){if(h.editable==true){h.map2D.disableAllEditMode();h.setHighlighted(false);h.setEditMode(true);a.addListener(h.map2D.map,"click",function(k){h.setEditMode(false)});h.map2D.theTooltip.hide()}})};b.uniSurface.prototype.setEditable=function(h){this.editable=h;this.setEditMode(h)};b.uniSurface.prototype.isEditable=function(){return this.editable};b.uniSurface.prototype.setCenter=function(j,h){return this._setCenter(new g.LatLng(j,h))};b.uniSurface.prototype.getZIndex=function(){return this.surface.get("zIndex")};b.uniSurface.prototype.getCenter=function(){var h=this._getCenter();return[h.lat(),h.lng()]};b.uniSurface.prototype.setContextMenu=function(h){b.setListener(this.surface,"rightclick",function(j){h(j.latLng.lat(),j.latLng.lng())})};b.createPolypoints=function(l,j,m,k,v){if(l.editCleanUp){l.editCleanUp()}l.disableAllEditMode();var y=l.map;var n;var x;if(j.polygon){n=new g.Polygon({map:y,strokeColor:j.color,strokeWeight:j.thickness,strokeOpacity:j.opacity,fillColor:j.fillcolor,fillOpacity:j.fillopacity,geodesic:j.geodesic});x=3}else{n=new g.Polyline({map:y,strokeColor:j.color,strokeWeight:j.thickness,strokeOpacity:j.opacity,geodesic:j.geodesic});x=2}n.setMap(y);var r=n.getPath();var t=f(y);var h=j.dragMarkerIcon?j.dragMarkerIcon:b.defaultDragMarker;var u=new g.MarkerImage(h.url,undefined,undefined,new g.Point(h.shiftX,h.shiftY));var s=[];var z=null;function w(B){var A=new g.Marker({animation:false,flat:true,icon:u,raiseOnDrag:false,position:B,map:y});s.push(A);a.addListenerOnce(A,"click",o)}function q(A){A.stop();clearTimeout(z);if(r.getAt(r.getLength()-2).equals(r.getAt(r.getLength()-1))){r.pop()}if(r.getLength()>=x){m(b.convertPath(r));p()}}function p(){n.setMap(null);var A;for(A=0;A<s.length;A++){s[A].setMap(null)}l.theTooltip.hide();a.clearInstanceListeners(t);t.setMap(null);delete t;l.editCleanUp=null;s=[];t=null}l.editCleanUp=p;var o=function(B){var A=B.latLng;if(r.getLength()==0){r.push(A);w(A);r.push(A)}else{r.push(A);z=setTimeout(function(){w(A)},300)}if(r.getLength()==x){a.addListenerOnce(t,"dblclick",q)}};a.addListener(t,"click",o);a.addListener(t,"mousemove",function(A){if(r.getLength()==0){l.theTooltip.show(A.latLng,"<p>Click to add first point</p>")}else{r.setAt(r.length-1,A.latLng);if(r.getLength()<x){l.theTooltip.show(A.latLng,"<p>Click to add one point</p>")}else{l.theTooltip.show(A.latLng,"<p>Double click to finish this shape</p>")}}});if(k!=undefined&&v!=undefined){o({latLng:new g.LatLng(k,v)})}};b.createPolygon=function(k,m,r,p,l,o,q,n,s,h,j){b.createPolypoints(k,{polygon:true,color:m,thickness:r,opacity:p,fillcolor:l,fillopacity:o,clickable:q,geodesic:n},s,h,j)};b.uniPolygon=function(h,k,j){this.map2D=h;if(k==undefined||k.length==undefined||k.length<6){return}this.color=j.color||"#ffffff";this.weight=j.thickness||2;this.opacity=j.opacity==undefined?1:j.opacity;this.fillopacity=j.fillOpacity==undefined?0.7:j.fillOpacity;this.geodesic=j.geodesic==undefined?true:j.geodesic;this.surface=new g.Polygon({map:this.map2D.map,path:b.generatePath(k),strokeColor:this.color,strokeWeight:this.weight,strokeOpacity:this.opacity,fillColor:j.fillColor||"#888888",fillOpacity:this.fillopacity,clickable:true,geodesic:this.geodesic,zIndex:this.map2D.zIndex++});this.isHighlighted=false;this.path=this.surface.getPath();this.closed=true;this.minPoints=3;this.map2D.overlaysArray.push(this);if(typeof j.callback=="function"){this.editCallback=j.callback;this.markers=[];this.editmarkers=[];if(j.constraint){this.constraintPath=new g.Polygon({path:b.generatePath(j.constraint)})}this.configureEditable("Click to graphically edit the points of this polygon")}else{this.editable=false}};b.uniPolygon.prototype=new b.uniSurface();b.uniPolygon.prototype.getArea=function(){return g.geometry.spherical.computeArea(this.path)};b.uniPolygon.prototype.addPoint=function(j,h){var k=this.path;var l=h?h:k.length;k.insertAt(l,j);this.addMarkerPoint(l,j)};b.uniPolygon.prototype.addMarkerPoint=function(m,j){var k=this.path;var l=this;var h=b.createMarker(this.map2D.map,new g.LatLng(j.lat(),j.lng()),this.dragMarker?this.dragMarker:b.defaultDragMarker);h.setDraggable(true);b.setListener(h,"drag",function(p){for(var o=0,n=l.markers.length;o<n&&l.markers[o]!=h;++o){}if(!l.constraintPath||(l.constraintPath&&g.geometry.poly.containsLocation(h.getPosition(),l.constraintPath))){k.setAt(o,h.getPosition());l.updateEditMarkers(false)}else{h.setPosition(k.getAt(o))}});b.setListener(h,"dragend",function(n){l.editCallback(l.getPositions())});h.setTitle("Double click to remove this point");b.setListener(h,"dblclick",function(){l.removePoint(h)});this.markers.splice(m,0,h)};b.uniPolygon.prototype.removePoint=function(h){var l=this.path;if(l.length>this.minPoints){for(var k=0,j=this.markers.length;k<j&&this.markers[k]!=h;++k){}this.markers[k].setMap(null);this.markers.splice(k,1);l.removeAt(k);if(this.editCallback){this.updateEditMarkers(true);this.editCallback(this.getPositions())}}};b.uniPolygon.prototype.setEditMode=function(h){this.edit=h;if(this.editable){if(h&&this.markers.length==0){this.createEditMarkers();this.createPointMarkers()}this.setMarkersVisibility(h)}};b.uniPolygon.prototype.createPointMarkers=function(){if(this.markers){var j;for(j=0;j<this.markers.length;j++){this.markers[j].setMap(null)}}var h=this;this.path.forEach(function(l,k){h.addMarkerPoint(k,l)})};b.uniPolygon.prototype.createEditMarkers=function(){if(this.editmarkers){var h;for(h=0;h<this.editmarkers.length;h++){this.editmarkers[h].setMap(null)}}this.editmarkers=[];var m=this;var k;var j=this.closed?this.path.getLength():this.path.getLength()-1;for(h=0;h<j;h++){k=b.halfWayTo(this.path.getAt(h),this.path.getAt(h+1<this.path.getLength()?h+1:0),this.geodesic);var l=b.createMarker(this.map2D.map,new g.LatLng(k.lat(),k.lng()),this.editMarker?this.editMarker:b.defaultEditMarker);l.setDraggable(true);(function(n){b.setListener(n,"dragstart",function(){m.path.insertAt(n.markerPos,n.getPosition())});b.setListener(n,"drag",function(){if(!m.constraintPath||(m.constraintPath&&g.geometry.poly.containsLocation(n.getPosition(),m.constraintPath))){m.path.setAt(n.markerPos,n.getPosition())}else{n.setPosition(m.path.getAt(n.markerPos))}});b.setListener(n,"dragend",function(){m.path.removeAt(n.markerPos);m.addPoint(n.getPosition(),n.markerPos);m.updateEditMarkers(true);m.editCallback(m.getPositions())})})(l);l.setTitle("Drag me to create a new point!");l.markerPos=h+1;this.editmarkers.push(l)}};b.uniPolygon.prototype.updateMarkers=function(j){var h;for(h=0;h<this.markers.length;h++){this.markers[h].setPosition(this.path.getAt(h))}this.updateEditMarkers(j)};b.uniPolygon.prototype.updateEditMarkers=function(j){if(j==true){this.createEditMarkers()}else{var k,h;for(h=0;h<this.editmarkers.length;h++){k=b.halfWayTo(this.markers[h].getPosition(),this.markers[h+1<this.markers.length?h+1:0].getPosition(),this.geodesic);this.editmarkers[h].setPosition(k)}}};b.uniPolygon.prototype.setMarkersVisibility=function(j){var h;for(h=0;h<this.markers.length;h++){this.markers[h].setVisible(j)}for(h=0;h<this.editmarkers.length;h++){this.editmarkers[h].setVisible(j)}};b.uniPolygon.prototype.getPositions=function(){return b.convertPath(this.path)};b.uniPolygon.prototype.forceSouthPole=function(){var j=this.surface.getPath().getArray();var h=[new g.LatLng(-89.99,180),new g.LatLng(-89.99,-120),new g.LatLng(-89.99,-60),new g.LatLng(-89.99,0),new g.LatLng(-89.99,60),new g.LatLng(-89.99,120),new g.LatLng(-89.99,180)];this.surface.setPaths([j,h])};b.uniPolygon.prototype.updatePositions=function(h){this.path.clear();if(this.edit==true){var j;for(j=0;j<this.markers.length;j++){this.markers[j].setMap(null)}this.markers=[];for(j=0;j<h.length;){this.addPoint(new g.LatLng(h[j],h[j+1]));j=j+2}this.updateEditMarkers(true)}else{for(j=0;j<h.length;){this.path.push(new g.LatLng(h[j],h[j+1]));j=j+2}}};b.uniPolygon.prototype.getEOBounds=function(){var h=b._getPathBounds(this.surface.getPath());return b.convertBounds(h)};b.uniPolygon.prototype._getCenter=function(){return b._getPathCenter(this.surface.getPath())};b.uniPolygon.prototype._setCenter=function(k){var h=this._getCenter();var j=k.lat()-h.lat();var n=k.lng()-h.lng();var l;for(l=0;l<this.path.getLength();l++){if(Math.abs(this.path.getAt(l).lat()+j)>90){return false}}var m;for(l=0;l<this.path.getLength();l++){m=this.path.getAt(l);this.path.setAt(l,new g.LatLng(m.lat()+j,m.lng()+n))}if(this.editable){this.updateMarkers(false)}return true};b.uniPolygon.prototype.remove=function(){this.surface.setMap(null);if(this.markers){for(var j=0,h=this.markers.length;j<h;j++){this.markers[j].setMap(null)}}if(this.editmarkers){for(j=0,h=this.editmarkers.length;j<h;j++){this.editmarkers[j].setMap(null)}}};b.createCircle=function(l,n,v,t,m,q,u,p,w,j,k){if(l.editCleanUp){l.editCleanUp()}var h=l.map;var o=f(h);h.setOptions({draggableCursor:"crosshair"});a.addListener(o,"click",r);a.addListener(o,"mousemove",function(x){l.theTooltip.show(x.latLng,"<p>Click to create center for circle</p>")});function r(z){a.clearInstanceListeners(o);var x=z.latLng;var F=new g.MarkerImage("./img/dragIcon.png",undefined,undefined,new g.Point(5,5));var C=new g.Marker({animation:false,flat:true,icon:F,raiseOnDrag:false,position:z.latLng,map:h});var y=new g.Circle({map:h,center:x,radius:1,strokeColor:n,strokeWeight:v,strokeOpacity:t,fillColor:m,fillOpacity:q,geodesic:p});var G=new g.Polyline({map:h,path:[x,x],strokeColor:n,strokeWeight:v,strokeOpacity:0,geodesic:true});function H(J){var I=g.geometry.spherical.computeDistanceBetween(x,J.latLng);y.setRadius(I);G.getPath().setAt(1,J.latLng);G.setOptions({strokeOpacity:1});l.theTooltip.show(b.halfWayTo(J.latLng,x),"<p>Radius is: "+b.roundDistance(I)+"</p><p>Click to finalise</p>")}function A(J){var I=g.geometry.spherical.computeDistanceBetween(x,J.latLng);B();w(x.lat(),x.lng(),I)}var D=a.addListener(o,"mousemove",H);var E=a.addListener(o,"click",A);function B(){a.clearInstanceListeners(o);o.setMap(null);delete o;h.setOptions({draggableCursor:"auto"});y.setMap(null);G.setMap(null);C.setMap(null);l.theTooltip.hide();l.editCleanUp=null}l.editCleanUp=B}function s(){h.setOptions({draggableCursor:"auto"});a.clearInstanceListeners(o);o.setMap(null);delete o;l.editCleanUp=null}l.editCleanUp=s;if(j!=undefined&&k!=undefined){r({latLng:new g.LatLng(j,k)})}};b.uniCircle=function(l,j,k,n,q){this.map2D=l;var h=new g.LatLng(j,k);this.color=q.color||"#ffffff";this.weight=q.thickness||2;this.opacity=q.opacity==undefined?1:q.opacity;this.fillopacity=q.fillOpacity==undefined?0.7:q.fillOpacity;this.surface=new g.Circle({map:l.map,center:h,radius:n,strokeColor:this.color,strokeWeight:this.weight,strokeOpacity:this.opacity,fillColor:q.fillColor||"#888888",fillOpacity:this.fillopacity,clickable:q.clickable});this.isHighlighted=false;this.editable=false;this.callback=q.callback;if(this.callback!=null&&typeof this.callback=="function"){var m=g.geometry.spherical.computeOffset(h,n,90);if(q.constraint){this.constraintPath=new g.Polygon({path:b.generatePath(q.constraint)})}var p=b.createMarker(l.map,new g.LatLng(m.lat(),m.lng()),b.defaultDragMarker);p.setDraggable(true);var o=this;b.setListener(p,"dragend",function(){o.refreshCircle(false);o.callback(o.center.lat(),o.center.lng(),o.getRadius())});b.setListener(p,"drag",function(){if(!o.constraintPath||(o.constraintPath&&g.geometry.poly.containsLocation(p.getPosition(),o.constraintPath))){}o.refreshCircle(true)});this.polyline=new g.Polyline({map:l.map,path:[h,m],strokeColor:this.color,strokeWeight:this.weight,strokeOpacity:0,geodesic:true});this.center=h;this.radius=n;this.radiusMarker=p;this.configureEditable("Click to graphically edit the center and radius of this circle")}l.overlaysArray.push(this)};b.uniCircle.prototype=new b.uniSurface();b.uniCircle.prototype.setEditMode=function(j){this.edit=j;if(this.radiusMarker){if(j){var h=g.geometry.spherical.computeOffset(this.center,this.radius,90);this.radiusMarker.setPosition(h);this.polyline.setPath([this.center,h])}this.radiusMarker.setVisible(j)}};b.uniCircle.prototype.refreshCircle=function(j){var h=this.getRadius();this.radius=h;this.surface.setRadius(h);if(j==true){this.polyline.getPath().setAt(1,this.radiusMarker.getPosition());this.polyline.setOptions({strokeOpacity:1});this.map2D.theTooltip.show(b.halfWayTo(this.radiusMarker.getPosition(),this.center),"<p>Radius is: "+b.roundDistance(h)+"</p>")}else{this.polyline.setOptions({strokeOpacity:0});this.map2D.theTooltip.hide()}};b.uniCircle.prototype.getRadius=function(){return g.geometry.spherical.computeDistanceBetween(this.radiusMarker.getPosition(),this.center)};b.uniCircle.prototype.getEOBounds=function(){var h=this.surface.getBounds();return b.convertBounds(h)};b.uniCircle.prototype.getArea=function(){return 0};b.uniCircle.prototype._getCenter=function(){return this.surface.getCenter()};b.uniCircle.prototype._setCenter=function(h){this.surface.setCenter(h);this.center=h;this.setEditMode(false);return true};b.uniCircle.prototype.setRadius=function(h){this.surface.setRadius(h);this.radius=h;this.setEditMode(false);return true};b.uniCircle.prototype.remove=function(){this.surface.setMap(null);if(this.polyline){this.polyline.setMap(null);this.radiusMarker.setMap(null)}this.map2D.theTooltip.hide()};b.createRectangle=function(m,o,v,t,n,r,u,q,w,k,l){if(m.editCleanUp){m.editCleanUp()}var h=m.map;h.setOptions({draggableCursor:"crosshair"});var p=f(h);function j(y){a.clearInstanceListeners(p);var G=y.latLng;var F=new g.Polygon({map:h,strokeColor:o,strokeWeight:v,strokeOpacity:t,fillColor:n,fillOpacity:r});var I=new g.MVCArray;F.setPaths(new g.MVCArray([I]));var D=new b.uniMarker(m,G.lat(),G.lng(),"./img/dragIcon.png",5,5);var C=new b.uniMarker(m,G.lat(),G.lng(),"./img/dragIcon.png",5,5);var H=new b.uniMarker(m,G.lat(),G.lng(),"./img/dragIcon.png",5,5);var A=new b.uniMarker(m,G.lat(),G.lng(),"./img/dragIcon.png",5,5);x(G,G);function x(K,J){b.uniRectangle.refreshPath(I,K,J);D.setPosition(K.lat(),K.lng());C.setPosition(J.lat(),J.lng());H.setPosition(K.lat(),J.lng());A.setPosition(J.lat(),K.lng())}function E(L){var K=L.latLng;var J=G;x(K,J);m.theTooltip.show(L.latLng,"<p>Position: "+L.latLng.toUrlValue(4)+"</p><p>Click to complete</p>")}function z(L){var K=D.getPosition();var J=C.getPosition();w(K.lat(),K.lng(),J.lat(),J.lng());B()}function B(){D.remove();C.remove();H.remove();A.remove();h.setOptions({draggableCursor:"auto"});F.setMap(null);a.clearInstanceListeners(p);p.setMap(null);delete p;m.theTooltip.hide();m.editCleanUp=null}m.editCleanUp=B;a.addListener(p,"mousemove",E);a.addListener(p,"click",z);C.setListener("click",z);H.setListener("click",z);A.setListener("click",z);D.setListener("click",z)}a.addListener(p,"click",j);a.addListener(p,"mousemove",function(x){m.theTooltip.show(x.latLng,"<p>Click to create the Rectangle</p>")});function s(){a.clearInstanceListeners(p);p.setMap(null);delete p;h.setOptions({draggableCursor:"auto"});m.editCleanUp=null}m.editCleanUp=s;if(k!=undefined&&l!=undefined){j({latLng:new g.LatLng(k,l)})}};b.createZoomRectangle=function(m,o,t,s,n,q,u,k,l){if(m.editCleanUp){m.editCleanUp()}var h=m.map;var p=f(h);function j(z){a.clearInstanceListeners(p);var v=z.latLng;var x=new g.Polygon({map:h,strokeColor:o,strokeWeight:t,strokeOpacity:s,fillColor:n,fillOpacity:q});var C=new g.MVCArray;x.setPaths(new g.MVCArray([C]));B(v,v);function B(E,D){b.uniRectangle.refreshPath(C,E,D)}function y(F){var E=F.latLng;var D=v;B(E,D);m.theTooltip.show(F.latLng,"<p>Position: "+F.latLng.toUrlValue(4)+"</p><p>Click to zoom to extent</p>")}function w(F){var E=C.getAt(1);var D=C.getAt(3);u(E.lat(),E.lng(),D.lat(),D.lng());A()}function A(){x.setMap(null);a.clearInstanceListeners(p);p.setMap(null);delete p;m.theTooltip.hide();m.editCleanUp=null}m.editCleanUp=A;a.addListener(p,"mousemove",y);a.addListener(p,"click",w)}a.addListener(p,"click",j);a.addListener(p,"mousemove",function(v){m.theTooltip.show(v.latLng,"<p>Click to start defining zoom area</p>")});function r(){a.clearInstanceListeners(p);p.setMap(null);delete p;h.setOptions({draggableCursor:"auto"});m.editCleanUp=null}m.editCleanUp=r;if(k!=undefined&&l!=undefined){j({latLng:new g.LatLng(k,l)})}};b.uniRectangle=function(l,q,r,n,p,w){this.map2D=l;var h=new g.LatLngBounds(new g.LatLng(n,r),new g.LatLng(q,p));this.color=w.color||"#ffffff";this.weight=w.thickness||2;this.opacity=w.opacity==undefined?1:w.opacity;this.fillopacity=w.fillOpacity==undefined?0.7:w.fillOpacity;this.surface=new g.Polygon({map:l.map,path:[],strokeColor:this.color,strokeWeight:this.weight,strokeOpacity:this.opacity,fillColor:w.fillColor||"#888888",fillOpacity:this.fillopacity,clickable:true});this.isHighlighted=false;this.editable=false;this.path=this.surface.getPath();if(w.callback!=null&&typeof w.callback=="function"){this.callback=w.callback;var s=this;function u(){s.callback(o.getPosition().lat(),o.getPosition().lng(),m.getPosition().lat(),m.getPosition().lng());l.theTooltip.hide()}function k(y,z){if(z){j.setPosition(new g.LatLng(m.getPosition().lat(),o.getPosition().lng()));v.setPosition(new g.LatLng(o.getPosition().lat(),m.getPosition().lng()))}else{o.setPosition(new g.LatLng(v.getPosition().lat(),j.getPosition().lng()));m.setPosition(new g.LatLng(j.getPosition().lat(),v.getPosition().lng()))}s.refreshRectangle();var x=y.getPosition();l.theTooltip.show(x,"<p>Position: "+x.toUrlValue(4)+"</p>")}function t(z,y){var x=b.createMarker(l.map,z,b.defaultDragMarker);x.setDraggable(true);b.setListener(x,"dragend",u);b.setListener(x,"drag",function(){k(x,y)});return x}var o=t(new g.LatLng(h.getNorthEast().lat(),h.getSouthWest().lng()),true);var m=t(new g.LatLng(h.getSouthWest().lat(),h.getNorthEast().lng()),true);var v=t(h.getNorthEast(),false);var j=t(h.getSouthWest(),false);this.topLeftMarker=o;this.bottomRightMarker=m;this.topRightMarker=v;this.bottomLeftMarker=j;this.configureEditable("Click to graphically edit the corners of this Rectangle");this.refreshRectangle()}else{b.uniRectangle.refreshPath(this.path,new g.LatLng(q,r),new g.LatLng(n,p))}l.overlaysArray.push(this)};b.uniRectangle.prototype=new b.uniSurface();b.uniRectangle.refreshPath=function(m,l,j){m.setAt(0,l);var k=new g.LatLng(l.lat(),j.lng());m.setAt(1,k);m.setAt(2,j);var h=new g.LatLng(j.lat(),l.lng());m.setAt(3,h)};b.uniRectangle.prototype.refreshRectangle=function(){var j=this.topLeftMarker.getPosition();var h=this.bottomRightMarker.getPosition();this.topRightMarker.setPosition(new g.LatLng(j.lat(),h.lng()));this.bottomLeftMarker.setPosition(new g.LatLng(h.lat(),j.lng()));b.uniRectangle.refreshPath(this.surface.getPath(),this.topLeftMarker.getPosition(),this.bottomRightMarker.getPosition())};b.uniRectangle.prototype.refreshMarkers=function(){var k=b._getPathBounds(this.surface.getPath());var h=k.getNorthEast();var j=k.getSouthWest();this.topLeftMarker.setPosition(new g.LatLng(h.lat(),j.lng()));this.topRightMarker.setPosition(h);this.bottomRightMarker.setPosition(new g.LatLng(j.lat(),h.lng()));this.bottomLeftMarker.setPosition(j)};b.uniRectangle.prototype._getBounds=function(){return b._getPathBounds(this.surface.getPath())};b.uniRectangle.prototype.getEOBounds=function(){return b.convertBounds(this._getBounds())};b.uniRectangle.prototype.setBounds=function(l,j,k,h){b.uniRectangle.refreshPath(this.surface.getPath(),new g.LatLng(k,h),new g.LatLng(l,j));if(this.editable){this.refreshMarkers()}};b.uniRectangle.prototype.getArea=function(){return g.geometry.spherical.computeArea(this.surface.getPath())};b.uniRectangle.prototype._getCenter=function(){return this._getBounds().getCenter()};b.uniRectangle.prototype._setCenter=function(k){var h=this._getCenter();var j=k.lat()-h.lat();var n=k.lng()-h.lng();var m=this.topLeftMarker.getPosition();var l=this.bottomRightMarker.getPosition();if(Math.abs(m.lat()+j)>=90||Math.abs(l.lat()+j)>=90){return false}this.topLeftMarker.setPosition(new g.LatLng(m.lat()+j,m.lng()+n));this.bottomRightMarker.setPosition(new g.LatLng(l.lat()+j,l.lng()+n));this.refreshRectangle();return true};b.uniRectangle.prototype.setEditMode=function(h){this.edit=h;if(this.topLeftMarker){this.topLeftMarker.setVisible(h);this.bottomRightMarker.setVisible(h);this.topRightMarker.setVisible(h);this.bottomLeftMarker.setVisible(h)}};b.uniRectangle.prototype.remove=function(){this.surface.setMap(null);if(this.topLeftMarker){this.topLeftMarker.setMap(null);this.bottomRightMarker.setMap(null);this.bottomLeftMarker.setMap(null);this.topRightMarker.setMap(null)}this.map2D.theTooltip.hide()};b.createPolyline=function(k,l,q,n,o,m,r,h,j,p){b.createPolypoints(k,{polygon:false,color:l,thickness:q,opacity:n,clickable:o,geodesic:m,dragMarkerIcon:p},r,h,j)};b.uniPolyline=function(j,r,l,s,o,p,m,n,k,q,h){this.map2D=j;this.markers=[];this.editmarkers=[];this.editCallback=n;this.editMarkerCallback=k;this.surface=new g.Polyline({map:j.map,path:b.generatePath(r),strokeColor:l,strokeWeight:s,strokeOpacity:o,clickable:true,geodesic:m});this.color=l;this.weight=s;this.opacity=o;this.geodesic=m;this.isHighlighted=false;this.path=this.surface.getPath();this.editable=false;this.dragMarker=q;this.editMarker=h;j.overlaysArray.push(this);this.minPoints=2;if(typeof n=="function"){this.editCallback=n;this.editMarkerCallback=k;this.markers=[];this.editmarkers=[];this.configureEditable("Click to graphically edit the points of this line")}else{this.editable=false}};b.uniPolyline.prototype=new b.uniPolygon();b.uniPolyline.prototype.getLength=function(){return g.geometry.spherical.computeLength(this.surface.getPath())};b.uniRuler=function(h,o,j,l,k,n,m,p){this.map2D=h;this.markers=[];this.editmarkers=[];this.editCallback=n;this.surface=new g.Polyline({map:h.map,path:b.generatePath(o),strokeColor:j,strokeWeight:l,strokeOpacity:k,clickable:true,geodesic:true});this.color=j;this.weight=l;this.opacity=k;this.geodesic=true;this.isHighlighted=false;this.path=this.surface.getPath();this.editable=true;this.dragMarker=m;this.editMarker=p;h.overlaysArray.push(this);this.minPoints=2;this.configureEditable("Click on the grey circles to add a point to the ruler's path  or drag the markers");this.setEditMode(true)};b.uniRuler.prototype=new b.uniPolygon();b.uniRuler.prototype.configureEditable=function(j){var h=this;this.edit=undefined;this.editable=true;b.setListener(this.surface,"mousemove",function(k){h.map2D.theTooltip.show(k.latLng,"<p>"+j+"</p>")});b.setListener(this.surface,"mouseout",function(){h.map2D.theTooltip.hide()})};b.uniRuler.prototype.setMarkersVisibility=function(j){var h;for(h=0;h<this.markers.length;h++){this.markers[h].setVisible(true)}for(h=0;h<this.editmarkers.length;h++){this.editmarkers[h].setVisible(true)}};b.constrainedFrame=function(l,s,B,t){var G=l.map;var k=b.generatePath(s);var z=g.geometry.spherical;var o=k.getAt(0);var F=k.getAt(1);var n=k.getAt(3);var E=k.getAt(2);var q=z.computeDistanceBetween(o,F);var j=z.computeHeading(o,F);var h=z.computeHeading(n,E);var w=z.computeDistanceBetween(o,new g.LatLng(frameCoords[0],frameCoords[1]))/q;var D=Math.round(z.computeDistanceBetween(new g.LatLng(frameCoords[0],frameCoords[1]),new g.LatLng(frameCoords[2],frameCoords[3]))/frameLength);var u=new g.MVCArray([z.interpolate(o,F,w),z.interpolate(o,F,w+(D*frameLength)/q),z.interpolate(n,E,w+(D*frameLength)/q),z.interpolate(n,E,w)]);u.setAt(4,u.getAt(0));var y=new g.Polygon({paths:u,strokeColor:editable?"#00FF00":"#fff",strokeOpacity:0.8,strokeWeight:editable?2:1,fillColor:"#eef",fillOpacity:editable?0:0.35,geodesic:true});y.setMap(G);this.surface=y;var r=z.computeDistanceBetween(u.getAt(0),u.getAt(1));var p=z.computeDistanceBetween(u.getAt(3),u.getAt(2));var m=[];var A=1/D;function v(){for(var J=0;J<D+1;J++){var I=z.interpolate(u.getAt(0),u.getAt(1),J*A);var K=z.interpolate(u.getAt(3),u.getAt(2),J*A);if(!m[J]){m[J]=new g.Polyline({map:G,strokeColor:"#fff",strokeWeight:1,strokeOpacity:J==0||J==D?0:0.5,geodesic:true})}m[J].setPath([I,K])}}v();if(editable){function x(){G.setOptions({draggable:true})}function C(J,I){var M=I.lat()-J.lat();var O=I.lng()-J.lng();var N=z.computeHeading(J,I);var L=z.computeDistanceBetween(J,I)*Math.cos(Math.PI*(N-j)/180);var K=(z.computeDistanceBetween(o,u.getAt(0))+L)/q;var P=(z.computeDistanceBetween(o,u.getAt(0))+L+r)/q;if(K>0&&K<1&&P>0&&P<1){u.setAt(0,z.interpolate(o,F,K));u.setAt(3,z.interpolate(n,E,K));u.setAt(4,u.getAt(0));u.setAt(1,z.interpolate(o,F,P));u.setAt(2,z.interpolate(n,E,P))}v()}var H=null}this.polygon=y;this.polylines=m;this.insidePath=u};b.constrainedFrame.prototype=new b.uniPolygon();function d(j,h){return((j%h)+h)%h}b.uniTMSLayer=(function(){function h(l,k,q,n,r,s,t,u,p){var m=l.map;var j=null;if(r&&t){j=new g.LatLngBounds(new g.LatLng(r,s),new g.LatLng(t,u))}var o=new g.ImageMapType({getTileUrl:function(B,x){var w=m.getProjection();var z=Math.pow(2,x);var v=w.fromPointToLatLng(new g.Point(B.x*256/z,(B.y+1)*256/z));var y=w.fromPointToLatLng(new g.Point((B.x+1)*256/z,B.y*256/z));if(j){var A=new g.LatLngBounds(v,y);if(!A.intersects(j)){return"http://maps.gstatic.com/intl/en_us/mapfiles/transparent.png"}}return k.replace("$z",x).replace("$y",n?B.y:(1<<x)-B.y-1).replace("$x",d(B.x,(1<<x)))},tileSize:new g.Size(256,256),isPng:true});this._map=m;this._layer=o;this._layer.displayCopyright=function(v){l.displayCopyright(q,v)};if(!p){l.overlaysArray.push(this)}}h.prototype.setVisible=function(m){var l=this._map.overlayMapTypes;for(var k=0,j=l.length;k<j&&l.getAt(k)!=this._layer;++k){}if(m){if(k==l.length){l.push(this._layer)}this._layer.displayCopyright(true)}else{if(k<l.length){l.removeAt(k)}this._layer.displayCopyright(false)}};h.prototype.remove=function(){this.setVisible(false)};h.prototype.setOpacity=function(j){if(this._layer){this._layer.setOpacity(j)}};h.prototype.getOpacity=function(){if(this._layer){return this._layer.getOpacity()}else{return 1}};h.prototype.setToBottom=function(){this.setZIndex(0)};h.prototype.setOnTop=function(){this.setZIndex(overlayMaps.length)};h.prototype.setZIndex=function(l){var j=this.getZIndex();if(j==-1){return}var k=this._map.overlayMapTypes;k.removeAt(j);k.insertAt(l,this._layer)};h.prototype.getZIndex=function(){var l=this._map.overlayMapTypes;for(var k=0,j=l.length;k<j&&l.getAt(k)!=this._layer;++k){}return k==l.length?-1:k};return h})();var e={"EPSG:4326":function(h){return{lat:h.lat(),lng:h.lng()}},"EPSG:3857":function(l){if((Math.abs(l.lng())>180||Math.abs(l.lat())>90)){return}var k=l.lng()*0.017453292519943295;var h=6378137*k;var j=l.lat()*0.017453292519943295;return{lng:h,lat:3189068.5*Math.log((1+Math.sin(j))/(1-Math.sin(j)))}}};e["CRS:84"]=e["EPSG:4326"];e["EPSG:102100"]=e["EPSG:3857"];e["EPSG:900913"]=e["EPSG:3857"];b.uniWMSLayer=(function(){function h(o,j,n,r,l,s,C,p,B,w,m,x){var k=o.map;C=C||"EPSG:4326";if(!e[C]){C="EPSG:4326"}var q=null;if(p&&w){q=new g.LatLngBounds(new g.LatLng(p,B),new g.LatLng(w,m))}var y=n.indexOf("1.3")==0;var v=512;var t=j;t+="REQUEST=GetMap";t+="&SERVICE=WMS";t+="&VERSION="+n;t+="&LAYERS="+r;t+="&width="+v;t+="&height="+v;t+="&"+(y==true?"crs":"srs")+"="+C;t+="&TRANSPARENT=TRUE";if(s){t+="&styles="+s}t+="&format=image/png";var u=e[C];var A=y==true&&C=="EPSG:4326";var z=new g.ImageMapType({getTileUrl:function(I,P){var F=k.getProjection();var J=Math.pow(2,P);var E=1<<(P-1);var H=I.x;if(H<0||H>=E){H=(H%E+E)%E}var G=F.fromPointToLatLng(new g.Point(H*v/J,(I.y+1)*v/J));var O=F.fromPointToLatLng(new g.Point((H+1)*v/J,I.y*v/J));if(q){var L=new g.LatLngBounds(new g.LatLng(Math.min(G.lat(),O.lat()),Math.min(G.lng(),O.lng())),new g.LatLng(Math.max(G.lat(),O.lat()),Math.max(G.lng(),O.lng())));if(!L.intersects(q)){return"http://maps.gstatic.com/intl/en_us/mapfiles/transparent.png"}}var N=u(new g.LatLng(Math.min(G.lat(),O.lat()),Math.min(G.lng(),O.lng())));var K=u(new g.LatLng(Math.max(G.lat(),O.lat()),Math.max(G.lng(),O.lng())));var M;if(A){M=N.lat+","+N.lng+","+K.lat+","+K.lng}else{M=N.lng+","+N.lat+","+K.lng+","+K.lat}var D=t+"&BBOX="+M;return D},isPng:true,tileSize:new g.Size(v,v)});this._map=k;this._layer=z;this._layer.displayCopyright=function(D){o.displayCopyright(l,D)};if(!x){o.overlaysArray.push(this)}}h.prototype.setVisible=function(m){var l=this._map.overlayMapTypes;for(var k=0,j=l.length;k<j&&l.getAt(k)!=this._layer;++k){}if(m){if(k==l.length){l.push(this._layer);this._layer.displayCopyright(true)}}else{if(k<l.length){l.removeAt(k)}this._layer.displayCopyright(false)}};h.prototype.remove=function(){this.setVisible(false)};h.prototype.setOpacity=function(j){if(this._layer){this._layer.setOpacity(j)}};h.prototype.getOpacity=function(){if(this._layer){return this._layer.getOpacity()}else{return 1}};h.prototype.setToBottom=function(){this.setZIndex(0)};h.prototype.setOnTop=function(){this.setZIndex(overlayMaps.length)};h.prototype.setZIndex=function(l){var j=this.getZIndex();if(j==-1){return}var k=this._map.overlayMapTypes;k.removeAt(j);k.insertAt(l,this._layer)};h.prototype.getZIndex=function(){var l=this._map.overlayMapTypes;for(var k=0,j=l.length;k<j&&l.getAt(k)!=this._layer;++k){}return k==l.length?-1:k};return h})();b.codeAddress=function(h,j){if(!this.geocoder){this.geocoder=new g.Geocoder()}this.geocoder.geocode({address:h,partialmatch:true},function(n,l){if(l==g.GeocoderStatus.OK){var k=[];for(var m=0;m<n.length;m++){var p=n[m];var o=p.geometry.bounds;if(!o){o=p.geometry.viewport}k[m]={placeName:p.formatted_address,lat:p.geometry.location.lat(),lng:p.geometry.location.lng(),swlat:o.getSouthWest().lat(),swlng:o.getSouthWest().lng(),nelat:o.getNorthEast().lat(),nelng:o.getNorthEast().lng()}}j(k,l)}else{j(null,""+l)}})};b.getElevations=function(l,h,m){if(!this.elevationService){this.elevationService=new g.ElevationService()}var j;var k=[];for(j=0;j<l.length;){k.push(new g.LatLng(l[j],l[j+1]));j=j+2}this.elevationService.getElevationAlongPath({path:k,samples:h},function(p){if(p==null){m(null)}else{var n=[];for(var o=0;o<p.length;o++){n[o]={lat:p[o].location.lat(),lng:p[o].location.lng(),elevation:p[o].elevation}}m(n)}})};var c=(function(){function x(A,z){this.sex_=z||false;this.set("container",document.createElement("DIV"));this.setMap(A)}x.prototype=new google.maps.OverlayView();x.prototype.addDiv=function(z){this.get("container").appendChild(z)},x.prototype.decToSex=function(B){var z=Math.floor(B);var A=((Math.abs(B)-z)*60).toFixed(2);if(A=="60.00"){z+=1;A="0.00"}return[z,":",A].join("")};x.prototype.onAdd=function(){var A=this;this.getPanes().mapPane.appendChild(this.get("container"));function B(){A.draw()}this.idleHandler_=google.maps.event.addListener(this.getMap(),"idle",B);function z(){A.draw()}z();this.typeHandler_=google.maps.event.addListener(this.getMap(),"maptypeid_changed",z)};x.prototype.clear=function(){var z=this.get("container");while(z.hasChildNodes()){z.removeChild(z.firstChild)}};x.prototype.onRemove=function(){this.get("container").parentNode.removeChild(this.get("container"));this.set("container",null);google.maps.event.removeListener(this.idleHandler_);google.maps.event.removeListener(this.typeHandler_)};x.prototype.show=function(){this.get("container").style.visibility="visible"};x.prototype.hide=function(){this.get("container").style.visibility="hidden"};function u(B){var C=B.getMap().getMapTypeId();var z=google.maps.MapTypeId;if(C===z.HYBRID){return"#fff"}if(C===z.ROADMAP){return"#000"}if(C===z.SATELLITE){return"#fff"}if(C===z.TERRAIN){return"#000"}var A=B.getMap().mapTypes[C];return(A.textColor)?A.textColor:"#fff"}function w(z){if(z<0.01){return 3}if(z<0.1){return 2}if(z<1){return 1}return 0}function m(z,A,C){for(var B=0;B<A.length;B+=1){if(z<=A[B]){return A[B]}}return C}var h=10;var s=[0.06,0.12,0.3,0.6,1.2,3,6,12,30,60,60*2,60*5,60*10,60*20,60*30];var y=[0.01,0.02,0.05,0.1,0.2,0.5,1,3,6,12,30,60,60*2,60*5,60*10,60*20,60*30];function p(z){if(z.sex_){return y}return s}function k(A,B,z){return A.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(B,z))}function r(A,z){return m(Math.ceil(A/h*6000)/100,z,60*45)/60}function t(z){return z.toString()+"px"}function l(A,z,E,D){var C=document.createElement("DIV");var B=C.style;B.position="absolute";B.left=t(z);B.top=t(E);B.color=A;B.width="3em";B.fontSize="1.0em";B.whiteSpace="nowrap";C.innerHTML=D;return C}function o(z,F,A,D,B){var E=document.createElement("DIV");var C=E.style;C.position="absolute";C.overflow="hidden";C.backgroundColor=B;C.opacity=0.3;var C=E.style;C.left=t(z);C.top=t(F);C.width=t(A);C.height=t(D);return E}var v=50000;function j(A,z){return o(A,-v,1,2*v,z)}function n(A,z){return o(-v,A,2*v,1,z)}function q(A,z,B){if(!B){B=Math.pow(10,-6)}if(Math.abs(A-z)<B){return true}return false}x.prototype.draw=function(){var P=u(this);this.clear();if(this.get("container").style.visibility!="visible"){return}var z=this.getMap().getBounds();if(!z){return}var N=z.getSouthWest(),D=z.getNorthEast();var O=N.lng(),R=N.lat(),M=D.lng(),J=D.lat();if(O==M){O=-180;M=180}if(J==R){R=-90;J=90}var E=p(this);var I=r(J-R,E);var C=r(M>O?M-O:((180-O)+(M+180)),E);O=Math.floor(O/C)*C;R=Math.floor(R/I)*I;J=Math.ceil(J/I)*I;M=Math.ceil(M/C)*C;if(M==O){O+=C}if(M<O){M+=360}var Q=O+2*C;var G=k(this,R+2*I,O).y+2;for(var F=O;F<M;F+=C){if(F>180){M-=360;F-=360}var L=k(this,R,F).x;this.addDiv(j(L,P));var B=q(F,Q);this.addDiv(l(P,L+(B?17:3),G-(B?3:0),(this.sex_?this.decToSex(F):F.toFixed(w(C)))))}var A=R+2*I;var H=k(this,R,O+2*C).x+3;for(;R<=J;R+=I){var K=k(this,R,O).y;this.addDiv(n(K,P));this.addDiv(l(P,H,K+(q(R,A)?7:2),(this.sex_?this.decToSex(R):R.toFixed(w(I)))))}};return x})();return b})();